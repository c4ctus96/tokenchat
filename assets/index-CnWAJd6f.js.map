{"version":3,"file":"index-CnWAJd6f.js","sources":["../../src/components/EthProfilePic.tsx","../../src/components/ChatSidebar.tsx","../../src/components/Firebase.tsx","../../src/components/ChatSelector.tsx","../../src/components/UserContext.tsx","../../src/components/ChatBottomBar.tsx","../../src/components/ChatWindow.tsx","../../src/components/Message.tsx","../../src/components/ChatContent.tsx","../../src/components/Chat.tsx","../../src/components/ProceedButton.tsx","../../src/components/WalletMenu.tsx","../../src/components/HomePage.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["import React from \"react\";\n\ntype EthProfilePicProps = {\n    eth: string;\n};\n\nconst EthProfilePic: React.FC<EthProfilePicProps> = ({ eth }) => {\n    return (\n        <div>\n            <img src={`https://effigy.im/a/${eth}.svg`} alt=\"Profile picture\" className=\"profilePic\" />\n        </div>\n    );\n};\n\nexport default EthProfilePic;","import React, { useState, useEffect } from \"react\";\nimport { ref, set, onValue } from \"firebase/database\";\nimport { useAccount } from \"wagmi\";\nimport \"../styles.css\";\nimport EthProfilePic from \"./EthProfilePic\";\n\nfunction ChatSidebar() {\n    const { address } = useAccount();\n    let pfp = \"https://static-00.iconduck.com/assets.00/profile-circle-icon-256x256-dngglm1r.png\";\n    if (address) {\n        pfp = `https://effigy.im/a/${address}.png`;\n    }\n\n    return (\n        <div className=\"ChatSidebar\">\n            <div className=\"profilePicture\">\n                {/*<img className=\"profilePicture\" src={pfp} alt=\"Profile Picture\"></img>*/}\n\n                {address && <EthProfilePic eth={address} />}\n            </div>\n        </div>\n    );\n}\n\nexport default ChatSidebar;\n","import { initializeApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\nimport { getFirestore } from \"firebase/firestore\";  // Import Firestore\n\nconst firebaseConfig = {\n  apiKey: import.meta.env.VITE_FIREBASE_APIKEY,\n  authDomain: import.meta.env.VITE_FIREBASE_AUTHDOMAIN,\n  projectId: import.meta.env.VITE_FIREBASE_PROJECTID,\n  storageBucket: import.meta.env.VITE_FIREBASE_STORAGEBUCKET,\n  messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,\n  appId: import.meta.env.VITE_FIREBASE_APPID,\n  measurementId: import.meta.env.VITE_FIREBASE_MEASUREMENTID,\n  // .env gitignored\n};\n\nconst app = initializeApp(firebaseConfig);\nconst analytics = getAnalytics(app);\nconst firestore = getFirestore(app);  // Initialize Firestore\n\nexport { firebaseConfig, firestore };\n","import React, { useState, useEffect } from \"react\";\nimport { firestore } from \"./Firebase\";\nimport { collection, getDocs } from \"firebase/firestore\";\nimport { useAccount } from \"wagmi\";\nimport EthProfilePic from \"./EthProfilePic\";\n\ninterface Chatroom {\n  id: string;\n  pid: string[];\n}\n\ninterface User {\n  id: string;\n  name: string;\n  wallet: string;\n}\n\ninterface ChatSelectorProps {\n  setSelectedChatId: (id: string) => void;\n  users: User[];\n  getWalletById: (id: string) => string;\n}\n\nfunction ChatSelector({ setSelectedChatId, users, getWalletById }: ChatSelectorProps) {\n  const { address } = useAccount();\n  const [chatrooms, setChatrooms] = useState<Chatroom[]>([]);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (!address) return;\n\n    const fetchChatrooms = async () => {\n      try {\n        const privateChatsRef = collection(firestore, \"privateChats\");\n        const privateChatsSnapshot = await getDocs(privateChatsRef);\n        const privateChatsData: Chatroom[] = privateChatsSnapshot.docs.map(doc => {\n          const data = doc.data();\n          return {\n            id: doc.id,\n            pid: data.pid || []\n          };\n        });\n        setChatrooms(privateChatsData);\n      } catch (err) {\n        setError(\"Failed to fetch data. Please check your internet connection.\");\n        console.error(\"Fetch error:\", err);\n      }\n    };\n    \n    fetchChatrooms();\n  }, [address]);\n\n  // Determine the current user based on wallet address\n  const currentUser = users.find(user => user.wallet === address);\n\n  // Filter chatrooms to only those that the current user participates in\n  const filteredChatrooms = currentUser\n    ? chatrooms.filter(chat => chat.pid.includes(currentUser.id))\n    : [];\n\n  const getUserNameById = (id: string) => {\n    const user = users.find(user => user.id === id);\n    return user ? user.name : id;\n  };\n\n  // For a valid chatroom, return the participant's id that doesn't match the current user\n  const getOtherParticipantId = (pid: string[]) => {\n    return currentUser ? pid.find(id => id !== currentUser.id) || '' : '';\n  };\n\n  const getOtherParticipantName = (pid: string[]) => {\n    const otherParticipantId = getOtherParticipantId(pid);\n    return getUserNameById(otherParticipantId);\n  };\n\n  const handleChatClick = (id: string) => {\n    setSelectedChatId(id);\n  };\n\n  return (\n    <div className=\"chatSelector\">\n      {error && <p className=\"error\">{error}</p>}\n      {filteredChatrooms.length > 0 ? (\n        filteredChatrooms.map((chatroom) => (\n          <div\n            className=\"contactBox\"\n            key={chatroom.id}\n            onClick={() => handleChatClick(chatroom.id)}\n          >\n            <EthProfilePic eth={getWalletById(getOtherParticipantId(chatroom.pid))} />\n            <div className=\"contactTextBox\">\n              <h3>{getOtherParticipantName(chatroom.pid)}</h3>\n              <h3>latest message</h3>\n            </div>\n          </div>\n        ))\n      ) : (\n        <p>No chatrooms available</p>\n      )}\n    </div>\n  );\n}\n\nexport default ChatSelector;\n","import React, { createContext, useState, useContext, ReactNode } from \"react\";\n\nexport interface User {\n  id: string;\n  name: string;\n  wallet: string;\n}\n\ninterface UserContextType {\n  currentUser?: User;\n  setCurrentUser: (user?: User) => void;\n}\n\nconst UserContext = createContext<UserContextType | undefined>(undefined);\n\nexport const UserProvider = ({ children }: { children: ReactNode }) => {\n  const [currentUser, setCurrentUser] = useState<User | undefined>(undefined);\n\n  return (\n    <UserContext.Provider value={{ currentUser, setCurrentUser }}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nexport const useUser = (): UserContextType => {\n  const context = useContext(UserContext);\n  if (!context) {\n    throw new Error(\"useUser must be used within a UserProvider\");\n  }\n  return context;\n};\n","import React from \"react\";\nimport { collection, addDoc } from \"firebase/firestore\";\nimport { firestore } from \"./Firebase\";\nimport { useUser } from \"./UserContext\";\nimport { IoSend } from \"react-icons/io5\";\n\ninterface ChatBottomBarProps {\n  selectedChatId?: string;\n}\n\nconst SendMessage = async (txt: string, from: string, chatId: string) => {\n  try {\n    const chatMessagesCollectionRef = collection(\n      firestore,\n      \"privateChats\",\n      chatId,\n      \"msg\"\n    );\n    await addDoc(chatMessagesCollectionRef, {\n      txt: txt,\n      from: from,\n      ts: new Date(),\n    });\n    console.log(\"Message sent successfully\");\n  } catch (error) {\n    console.error(\"Error sending message:\", error);\n  }\n};\n\nconst ChatBottomBar: React.FC<ChatBottomBarProps> = ({ selectedChatId }) => {\n  const [inputValue, setInputValue] = React.useState(\"\");\n  const { currentUser } = useUser();\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setInputValue(e.target.value);\n  };\n\n  const handleSend = () => {\n    if (!selectedChatId || !currentUser || !inputValue.trim()) {\n      console.error(\"Missing required data:\", { selectedChatId, currentUser, inputValue });\n      return;\n    }\n    \n    SendMessage(inputValue, currentUser.id, selectedChatId);\n    setInputValue(\"\"); // Clear input after sending\n  };\n\n  return (\n    <div className=\"chatBottomBar\">\n      <input\n        type=\"text\"\n        className=\"messageInput\"\n        placeholder=\"Type your message\"\n        value={inputValue}\n        onChange={handleChange}\n      />\n      <button\n        className=\"sendMessageButton\"\n        onClick={handleSend}\n        disabled={!selectedChatId || !currentUser}\n        title=\"Send message\"\n      >\n        <IoSend size={20} />\n      </button>\n    </div>\n  );\n};\n\nexport default ChatBottomBar;","import React, { ReactNode } from \"react\";\nimport \"../styles.css\";\nimport ChatBottomBar from \"./ChatBottomBar\";\n\ninterface ChatWindowProps {\n  children?: ReactNode; // Allow ChatWindow to accept children\n  selectedChatId?: string; // Add this prop\n}\n\nfunction ChatWindow({ children, selectedChatId }: ChatWindowProps) {\n  return (\n    <div className=\"chatWindow\">\n      <div className=\"chatContent\">{children}</div> {/* Render children here */}\n      <ChatBottomBar selectedChatId={selectedChatId} />\n    </div>\n  );\n}\n\nexport default ChatWindow;\n","import React from \"react\";\n\ninterface MessageProps {\n  text: string;\n  timeStamp: number; // Expecting timeStamp as a number in milliseconds\n  from: string;\n  own: boolean;\n}\n\nconst Message: React.FC<MessageProps> = ({ text, timeStamp, from, own }) => {\n  return (\n    <div className=\"messageBox\">\n      <div className={`message ${own ? 'own' : ''}`}>\n        <p className=\"message-text\">{text}</p>\n        <p className=\"message-timestamp\">{new Date(timeStamp).toLocaleString()}</p>\n      </div>\n    </div>\n  );\n};\n\nexport default Message;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { firestore } from \"./Firebase\";\nimport { collection, query, orderBy, onSnapshot, Timestamp } from \"firebase/firestore\";\nimport Message from \"./Message\";\nimport { useAccount } from \"wagmi\";\nimport { useUser } from \"./UserContext\";\n\ninterface ChatMessage {\n  txt: string;\n  ts: Timestamp;\n  from: string;\n}\n\ninterface User {\n  id: string;\n  name: string;\n  wallet: string;\n}\n\ninterface ChatContentProps {\n  selectedChatId: string;\n  users: User[];\n  getWalletById: (id: string) => string;\n}\n\nfunction ChatContent({ selectedChatId, users, getWalletById }: ChatContentProps) {\n  const [messages, setMessages] = useState<ChatMessage[]>([]);\n  const { address } = useAccount();\n  const { currentUser } = useUser();\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  // Scroll to bottom function\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  // Scroll whenever messages update\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  useEffect(() => {\n    if (!selectedChatId) return;\n\n    // Create a query with ordering\n    const messagesRef = collection(firestore, \"privateChats\", selectedChatId, \"msg\");\n    const messagesQuery = query(messagesRef, orderBy(\"ts\", \"asc\"));\n\n    // Set up real-time listener\n    const unsubscribe = onSnapshot(messagesQuery, (snapshot) => {\n      const fetchedMessages: ChatMessage[] = [];\n      snapshot.forEach((doc) => {\n        const messageData = doc.data() as ChatMessage;\n        if (messageData.txt && messageData.ts && messageData.from) {\n          fetchedMessages.push(messageData);\n        } else {\n          console.log(\"Missing fields in document:\", doc.id);\n        }\n      });\n      console.log(\"Real-time Messages Update:\", fetchedMessages);\n      setMessages(fetchedMessages);\n    }, (error) => {\n      console.error(\"Error fetching messages:\", error);\n    });\n\n    // Cleanup subscription on unmount or when selectedChatId changes\n    return () => unsubscribe();\n  }, [selectedChatId]);\n\n  return (\n    <div className=\"chatContent\">\n      {messages.map((message, index) => {\n        const isOwnMessage = currentUser?.id ? message.from === currentUser.id : false;\n        \n        return (\n          <Message\n            key={index}\n            text={message.txt}\n            timeStamp={message.ts.toMillis()}\n            from={message.from}\n            own={isOwnMessage}\n          />\n        );\n      })}\n      <div ref={messagesEndRef} /> {/* Invisible element to scroll to */}\n    </div>\n  );\n}\n\nexport default ChatContent;\n","import React, { useState, useEffect } from \"react\";\nimport { useAccount } from \"wagmi\";\nimport \"../styles.css\";\nimport ChatSidebar from \"./ChatSidebar\";\nimport ChatSelector from \"./ChatSelector\";\nimport ChatWindow from \"./ChatWindow\";\nimport ChatContent from \"./ChatContent\";\nimport { collection, getDocs } from \"firebase/firestore\";\nimport { firestore } from \"./Firebase\";\nimport { useUser } from \"./UserContext\";\n\ninterface User {\n  id: string;\n  name: string;\n  wallet: string;\n}\n\nfunction Chat() {\n  const { address } = useAccount(); // Get the current user's wallet address\n  const [selectedChatId, setSelectedChatId] = useState<string | null>(null);\n  const [users, setUsers] = useState<User[]>([]);\n  const { setCurrentUser } = useUser(); // Get the setCurrentUser function from context\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      const usersRef = collection(firestore, \"users\");\n      const usersSnapshot = await getDocs(usersRef);\n      const usersData = usersSnapshot.docs.map((doc) => ({\n        id: doc.id,\n        name: doc.data().name,\n        wallet: doc.data().wallet,\n      }));\n      setUsers(usersData);\n    };\n    fetchUsers();\n  }, []);\n\n  // Update currentUser in context whenever users or address changes\n  useEffect(() => {\n    if (users.length > 0 && address) {\n      const currentUser = users.find(user => user.wallet === address);\n      console.log(\"Current User:\", currentUser);\n      setCurrentUser(currentUser);\n    }\n  }, [users, address, setCurrentUser]);\n\n  // Handler for selecting a chat room\n  const handleChatSelect = (chatId: string) => {\n    setSelectedChatId(chatId);\n  };\n\n  // Helper function to get wallet by user ID\n  const getWalletById = (id: string) => {\n    const user = users.find((user) => user.id === id);\n    return user ? user.wallet : \"\";\n  };\n\n  return (\n    <div className=\"chat\">\n      <ChatSidebar />\n      <ChatSelector\n        setSelectedChatId={handleChatSelect}\n        users={users}\n        getWalletById={getWalletById}\n      />\n      <ChatWindow selectedChatId={selectedChatId || undefined}>\n        {selectedChatId && (\n          <ChatContent\n            selectedChatId={selectedChatId}\n            users={users}\n            getWalletById={getWalletById}\n          />\n        )}\n      </ChatWindow>\n    </div>\n  );\n}\n\nexport default Chat;\n","import React, { useState } from 'react';\nimport { collection, getDocs, query, where } from 'firebase/firestore';\nimport { useAccount } from 'wagmi';\nimport { SlLogin } from \"react-icons/sl\";\nimport { firestore } from './Firebase'; \nimport { useNavigate } from 'react-router-dom';\n\nfunction ProceedButton() {\n  const { address } = useAccount();\n  const [userExists, setUserExists] = useState<boolean | null>(null);\n  const navigate = useNavigate();\n\n  const checkUser = async (walletAddress: string) => {\n    const usersCollection = collection(firestore, 'users');\n    const q = query(usersCollection, where('wallet', '==', walletAddress));\n\n    try {\n      const querySnapshot = await getDocs(q);\n      const userFound = !querySnapshot.empty;\n      console.log(\"User found:\", userFound);\n      setUserExists(userFound);\n\n      if (userFound) {\n        navigate('/chat'); // Redirect to Chat page if user is found\n      } else {\n        navigate('/signup'); // Redirect to Signup page if user is not found\n      }\n    } catch (error) {\n      console.error('Error checking user:', error);\n      setUserExists(false);\n      navigate('/signup'); // Redirect to Signup page on error\n    }\n  };\n\n  return (\n    <div>\n      <button\n        className=\"proceedButton\"\n        onClick={() => {\n          if (address) {\n            checkUser(address);\n          } else {\n            console.error(\"Address is undefined\");\n          }\n        }}\n      >\n        <SlLogin size={28} />\n        <span>Proceed</span>\n      </button>\n      {userExists !== null && (\n        <p>{userExists ? 'User exists' : 'User does not exist'}</p>\n      )}\n    </div>\n  );\n}\n\nexport default ProceedButton;\n","import React from 'react';\nimport { SlClose } from 'react-icons/sl';\nimport { useAccount, useDisconnect } from 'wagmi';\n\nfunction WalletMenu() {\n  const { address, isConnected } = useAccount();\n  const { disconnect } = useDisconnect();\n  \n  const handleDisconnect = async () => {\n    // Clean up localStorage\n    localStorage.removeItem('walletconnect');\n    localStorage.removeItem('walletConnected');\n    localStorage.removeItem('connectorId');\n    \n    // Wagmi disconnect\n    disconnect();\n  }\n  \n  return (\n    <div className=\"wallet-button\">\n      {isConnected && address ? (\n        <div className='walletBubble'>\n          <div className=\"address\">\n            {address.slice(0, 6)}...{address.slice(-4)}\n          </div>\n          <button onClick={handleDisconnect}><SlClose size={25} /></button>\n        </div>\n      ) : (\n        // Directly use the web3modal button\n        <w3m-connect-button />\n      )}\n    </div>\n  );\n}\n\nexport default WalletMenu;\n","import React, { useState, useEffect } from \"react\";\nimport ConnectButton from \"./ConnectButton\";\nimport \"../styles.css\";\nimport { useAccount, useConnect, useDisconnect } from \"wagmi\";\nimport { useNavigate } from \"react-router-dom\";\nimport ProceedButton from \"./ProceedButton\";\nimport WalletMenu from \"./WalletMenu\";\n\n// Define type for custom web3modal elements\n// Using built-in Web3Modal types\n\nfunction HomePage() {\n  const { address, isConnected, connector } = useAccount();\n  const { connect, connectors } = useConnect();\n  const { disconnect } = useDisconnect();\n  const [connected, setConnected] = useState(isConnected);\n  const navigate = useNavigate();\n\n  // Try to automatically reconnect on page load\n  useEffect(() => {\n    const wasConnected = localStorage.getItem('walletConnected') === 'true';\n    if (wasConnected && !isConnected) {\n      console.log(\"Attempting to reconnect wallet automatically...\");\n      \n      // Find the right connector\n      const savedConnectorId = localStorage.getItem('connectorId');\n      console.log(\"Last used connector:\", savedConnectorId);\n      \n      if (savedConnectorId) {\n        const matchingConnector = connectors.find(c => c.id === savedConnectorId);\n        if (matchingConnector) {\n          console.log(\"Reconnecting with saved connector:\", savedConnectorId);\n          connect({ connector: matchingConnector });\n        }\n      } else {\n        // Fallback to injected\n        const injectedConnector = connectors.find(c => c.id === 'injected');\n        if (injectedConnector) {\n          console.log(\"No saved connector, trying injected...\");\n          connect({ connector: injectedConnector });\n        }\n      }\n    }\n  }, [connect, connectors, isConnected]);\n\n  // Listen for connection changes\n  useEffect(() => {\n    console.log(\"Connection state changed:\", isConnected ? \"connected\" : \"disconnected\");\n    console.log(\"Current connector:\", connector?.id);\n    setConnected(isConnected);\n    \n    // If connection is established and was previously not connected\n    if (isConnected && !connected) {\n      console.log(\"Wallet newly connected:\", address);\n    }\n    \n    // If disconnected and was previously connected\n    if (!isConnected && connected) {\n      console.log(\"Wallet disconnected\");\n    }\n  }, [isConnected, address, connected, connector]);\n\n  // Handle wallet connection events more robustly\n  useEffect(() => {\n    // This helps handle disconnection events - we check state on focus\n    const handleFocus = () => {\n      // Force check connection status when tab gets focus\n      if (connected && !isConnected) {\n        console.log(\"Connection lost while page was inactive, updating UI\");\n        setConnected(false);\n      }\n    };\n\n    window.addEventListener('focus', handleFocus);\n    \n    return () => {\n      window.removeEventListener('focus', handleFocus);\n    };\n  }, [connected, isConnected]);\n\n  const handleDisconnect = () => {\n    try {\n      // First update our app state to show disconnected UI immediately\n      setConnected(false);\n      \n      // Clear localStorage on manual disconnect\n      localStorage.removeItem('walletConnected');\n      localStorage.removeItem('lastConnectedAddress');\n      localStorage.removeItem('connectorId');\n      \n      console.log(\"Manual disconnect triggered, state cleared\");\n      \n      // Then try to disconnect via wagmi\n      disconnect();\n    } catch (error) {\n      console.error(\"Error during disconnect:\", error);\n    }\n  };\n\n  return (\n    <div className=\"homepage\">\n      <div className=\"title\">\n        <h1>Chat 3.0 is here.</h1>\n        <h2>Your personal web3 companion.</h2>\n      </div>\n      <div>\n        <div className=\"login\">\n          <h3>\n            {connected \n              ? `Connected ${connector?.id ? `(${connector.id})` : \"\"}` \n              : \"Connect your wallet\"}\n          </h3>\n          <WalletMenu />\n          {connected && <ProceedButton />}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default HomePage; ","import React, { ReactNode, useEffect } from 'react';\nimport { createWeb3Modal } from '@web3modal/wagmi/react';\nimport { useAccount } from 'wagmi';\nimport { mainnet, arbitrum } from 'viem/chains';\nimport { WagmiProvider, createConfig, http } from 'wagmi';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { walletConnect, injected, coinbaseWallet } from 'wagmi/connectors';\nimport { authConnector } from '@web3modal/wagmi';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport Chat from \"./components/Chat\";\nimport HomePage from \"./components/HomePage\";\nimport { UserProvider } from \"./components/UserContext\";\n\nconst queryClient = new QueryClient();\nconst projectId = import.meta.env.VITE_WAGMI_PROJECTID;\n\nif (!projectId) throw new Error(\"Project ID is undefined\");\n\nconst metadata = {\n  name: \"TokenChat\",\n  description: \"Web3 Chat Application\",\n  url: \"https://c4ctus96.github.io/tokenchat\",\n  icons: [\"https://avatars.githubusercontent.com/u/37784886\"],\n};\n\nconst chains = [mainnet, arbitrum] as const;\n\n// Create the wagmi config first\nconst wagmiConfig = createConfig({\n  chains,\n  transports: {\n    [mainnet.id]: http('https://eth-mainnet.g.alchemy.com/v2/demo'),\n    [arbitrum.id]: http('https://arb-mainnet.g.alchemy.com/v2/demo'),\n  },\n  connectors: [\n    walletConnect({\n      projectId,\n      metadata,\n      showQrModal: false\n    }),\n    injected({ shimDisconnect: true }),\n    coinbaseWallet({\n      appName: metadata.name,\n      appLogoUrl: metadata.icons[0],\n    }),\n    authConnector({\n      options: { projectId },\n      socials: ['google', 'x', 'github', 'discord', 'apple'],\n      showWallets: true,\n      email: true,\n      walletFeatures: false,\n    }),\n  ],\n});\n\n// Initialize Web3Modal with the wagmi config\ncreateWeb3Modal({\n  wagmiConfig,\n  projectId,\n  defaultChain: mainnet,\n  themeMode: 'dark',\n  enableAnalytics: true,\n  enableOnramp: false,\n});\n\nfunction PrivateRoute({ children }: { children: ReactNode }) {\n  const { isConnected } = useAccount();\n  return isConnected ? <>{children}</> : <Navigate to=\"/\" />;\n}\n\n// Component to handle initial connection check\nfunction ConnectionManager() {\n  const { isConnected } = useAccount();\n  \n  useEffect(() => {\n    console.log(\"App initialized, connection status:\", isConnected);\n    // Add error handling for MetaMask detection\n    if (typeof window.ethereum === 'undefined') {\n      console.log(\"MetaMask not detected, but WalletConnect can still be used\");\n    }\n  }, [isConnected]);\n  \n  return null;\n}\n\n// Main App component\nfunction App() {\n  return (\n    <WagmiProvider config={wagmiConfig}>\n      <QueryClientProvider client={queryClient}>\n        <UserProvider>\n          <Router basename=\"/tokenchat\">\n            <ConnectionManager />\n            <Routes>\n              <Route path=\"/\" element={<HomePage />} />\n              <Route\n                path=\"/chat\"\n                element={\n                  <PrivateRoute>\n                    <Chat />\n                  </PrivateRoute>\n                }\n              />\n            </Routes>\n          </Router>\n        </UserProvider>\n      </QueryClientProvider>\n    </WagmiProvider>\n  );\n}\n\n// Export the App component as default\nexport default App;\n","import React from 'react';\nimport { createRoot } from 'react-dom/client';\nimport App from './App';\n\nconst rootElement = document.getElementById('root') as HTMLElement;\nconst root = createRoot(rootElement);\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n); "],"names":["EthProfilePic","eth","jsx","ChatSidebar","address","useAccount","firebaseConfig","app","initializeApp","getAnalytics","firestore","getFirestore","ChatSelector","setSelectedChatId","users","getWalletById","chatrooms","setChatrooms","useState","error","setError","useEffect","privateChatsRef","collection","privateChatsData","getDocs","doc","data","err","currentUser","user","filteredChatrooms","chat","getUserNameById","id","getOtherParticipantId","pid","getOtherParticipantName","otherParticipantId","handleChatClick","jsxs","chatroom","UserContext","createContext","UserProvider","children","setCurrentUser","useUser","context","useContext","SendMessage","txt","from","chatId","chatMessagesCollectionRef","addDoc","ChatBottomBar","selectedChatId","inputValue","setInputValue","React","handleChange","e","handleSend","IoSend","ChatWindow","Message","text","timeStamp","own","ChatContent","messages","setMessages","messagesEndRef","useRef","scrollToBottom","_a","messagesRef","messagesQuery","query","orderBy","unsubscribe","onSnapshot","snapshot","fetchedMessages","messageData","message","index","isOwnMessage","Chat","setUsers","usersRef","usersData","handleChatSelect","ProceedButton","userExists","setUserExists","navigate","useNavigate","checkUser","walletAddress","usersCollection","q","where","userFound","SlLogin","WalletMenu","isConnected","disconnect","useDisconnect","handleDisconnect","SlClose","HomePage","connector","connect","connectors","useConnect","connected","setConnected","savedConnectorId","matchingConnector","c","injectedConnector","handleFocus","queryClient","QueryClient","projectId","metadata","chains","mainnet","arbitrum","wagmiConfig","createConfig","http","walletConnect","injected","coinbaseWallet","authConnector","createWeb3Modal","PrivateRoute","Fragment","Navigate","ConnectionManager","App","WagmiProvider","QueryClientProvider","Router","Routes","Route","rootElement","root","createRoot"],"mappings":"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"}